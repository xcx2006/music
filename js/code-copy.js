REDEFINE.initCodeCopy=()=>{HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this);this.parentNode.removeChild(this);e.appendChild(this)};document.querySelectorAll("figure.highlight").forEach((e=>{const t=document.createElement("div");e.wrap(t);t.classList.add("highlight-container");t.insertAdjacentHTML("beforeend",'<div class="copy-btn"><i class="fa-solid fa-copy"></i></div>');const n=e.parentNode.querySelector(".copy-btn");n.addEventListener("click",(e=>{const t=e.currentTarget;const n=[...t.parentNode.querySelectorAll(".code .line")].map((e=>e.innerText)).join("\n");const o=document.createElement("textarea");o.style.top=window.scrollY+"px";o.style.position="absolute";o.style.opacity="0";o.readOnly=true;o.value=n;document.body.append(o);const a=document.getSelection();const c=a.rangeCount>0?a.getRangeAt(0):false;o.select();o.setSelectionRange(0,n.length);o.readOnly=false;const s=document.execCommand("copy");t.querySelector("i").className=s?"fas fa-check":"fas fa-times";o.blur();t.blur();if(c){a.removeAllRanges();a.addRange(c)}document.body.removeChild(o)}));n.addEventListener("mouseleave",(e=>{setTimeout((()=>{e.target.querySelector("i").className="fas fa-copy"}),300)}))}))};