function initTOC(){REDEFINE.utils.navItems=document.querySelectorAll(".post-toc-wrap .post-toc li");if(REDEFINE.utils.navItems.length>0){REDEFINE.utils={...REDEFINE.utils,updateActiveTOCLink(){if(!Array.isArray(REDEFINE.utils.sections))return;let e=REDEFINE.utils.sections.findIndex((e=>e&&e.getBoundingClientRect().top-200>0));if(e===-1){e=REDEFINE.utils.sections.length-1}else if(e>0){e--}this.activateTOCLink(e)},registerTOCScroll(){REDEFINE.utils.sections=[...document.querySelectorAll(".post-toc li a.nav-link")].map((e=>{const t=document.getElementById(decodeURI(e.getAttribute("href")).replace("#",""));e.addEventListener("click",(e=>{e.preventDefault();const i=t.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:"linear",scrollTop:i-10,complete:function(){setTimeout((()=>{REDEFINE.utils.pageTop_dom.classList.add("hide")}),100)}})}));return t}))},activateTOCLink(e){const t=document.querySelectorAll(".post-toc li a.nav-link")[e];if(!t||t.classList.contains("active-current")){return}document.querySelectorAll(".post-toc .active").forEach((e=>{e.classList.remove("active","active-current")}));t.classList.add("active","active-current");const i=document.querySelector(".post-toc-wrap");window.anime({targets:i,duration:200,easing:"linear",scrollTop:i.scrollTop-i.offsetHeight/2+t.getBoundingClientRect().top-i.getBoundingClientRect().top})},showTOCAside(){const e=()=>{const e=REDEFINE.getStyleStatus();const t="isOpenPageAside";if(e&&e.hasOwnProperty(t)){REDEFINE.utils.TocToggle.pageAsideHandleOfTOC(e[t])}else{REDEFINE.utils.TocToggle.pageAsideHandleOfTOC(true)}};const t="init_open";if(REDEFINE.theme_config.toc.hasOwnProperty(t)){REDEFINE.theme_config.toc[t]?e():REDEFINE.utils.TocToggle.pageAsideHandleOfTOC(false)}else{e()}}};REDEFINE.utils.showTOCAside();REDEFINE.utils.registerTOCScroll()}else{REDEFINE.utils.pageContainer_dom.removeChild(document.querySelector(".toc-content-container"));REDEFINE.utils.pageContainer_dom.removeChild(document.querySelector(".toc-marker"))}}if(REDEFINE.theme_config.pjax.enable===true&&REDEFINE.utils){initTOC()}else{window.addEventListener("DOMContentLoaded",initTOC)}